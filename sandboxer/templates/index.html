<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Sandboxer</title>
  <link rel="icon" type="image/png" href="/static/favicon.png">
  <link rel="apple-touch-icon" href="/static/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/static/webtui.css">
  <link rel="stylesheet" href="/static/catppuccin.css">
  <link rel="stylesheet" href="/static/style.css">
</head>
<body data-webtui-theme="catppuccin-mocha">

<header class="header">
  <div class="header-group">
    <div class="logo">sandboxer</div>
    <select id="dir" class="dir-select" onchange="onDirOrTypeChange()">
      {{dir_options}}
    </select>
    <span is-="badge" variant-="mauve" id="sessionCount">0</span>
    <button variant-="red" size-="small" onclick="closeAllSessions()" title="Close all sessions">×</button>
  </div>
  <div class="header-group">
    <select id="type" onchange="onDirOrTypeChange()">
      <option value="claude">claude</option>
      <option value="gemini">gemini</option>
      <option value="resume">resume</option>
      <option value="lazygit">lazygit</option>
      <option value="bash">bash</option>
    </select>
    <span id="resumeWrap" class="resume-wrap">
      <select id="resumeSession">
        <option value="">...</option>
      </select>
    </span>
    <button variant-="green" size-="small" onclick="createSession()">+ new</button>
  </div>
  <div class="header-group">
    <div class="view-modes" id="viewModes">
      <button data-view="list" size-="small" title="List">≡</button>
      <button data-view="1" size-="small" title="1 col">◻</button>
      <button data-view="2" size-="small" title="2 col">◻◻</button>
      <button data-view="3" size-="small" title="3 col">◻◻◻</button>
    </div>
    <input type="range" id="previewScale" min="50" max="100" value="75" oninput="updatePreviewScale(this.value)" title="Preview zoom">
  </div>
  <div class="header-group header-stats">
    <span class="stat" id="cpuStat"><span>--%</span> cpu</span>
    <span class="stat" id="memStat"><span>--%</span> mem</span>
    <span class="stat" id="diskStat"><span>--%</span> disk</span>
  </div>
  <div class="header-group">
    <button variant-="teal" size-="small" onclick="copyTakeover()" title="Copy SSH command">ssh</button>
  </div>
</header>

<main>
  <div class="grid">
    {{cards}}
  </div>
</main>


<div id="modal" class="modal" onclick="if(event.target===this) hideModal()">
  <div class="modal-box">
    <button class="modal-close" variant-="red" size-="small" onclick="hideModal()">×</button>
    <h2>claude command</h2>
    <pre>IS_SANDBOX=1 claude --dangerously-skip-permissions \
  --system-prompt {{system_prompt_path}}</pre>
    <p>--dangerously-skip-permissions skips all permission prompts</p>
    <p>--system-prompt loads custom sandbox behavior</p>
    <p>sessions run in tmux and persist across restarts</p>
  </div>
</div>

<script src="/static/main.js"></script>
</body>
</html>
